
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Top-level user object for quick companyId lookup.",
      "properties": {
        "companyId": { "type": "string" }
      },
      "required": ["companyId"]
    },
    "Company": {
      "title": "Company",
      "type": "object",
      "description": "Represents a company using the application.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the company."
        }
      },
      "required": ["name"]
    },
    "Employee": {
      "title": "Employee",
      "type": "object",
      "description": "Represents an internal employee with username/password auth.",
      "properties": {
        "username": { "type": "string" },
        "password": { "type": "string", "description": "This should be a hashed password in a real application." },
        "role": { "type": "string", "enum": ["Admin", "Employee", "Dono"] },
        "companyId": { "type": "string" }
      },
      "required": ["username", "password", "role", "companyId"]
    },
    "CatalogProduct": {
      "title": "CatalogProduct",
      "type": "object",
      "description": "Represents a base product in the company's catalog.",
      "properties": {
        "name": { "type": "string" },
        "category": { "type": "string" },
        "price": { "type": "number" },
        "lowStockThreshold": { "type": "number" },
        "criticalStockThreshold": { "type": "number" },
        "unit": { "type": "string" }
      },
      "required": ["name", "category", "price"]
    },
    "CatalogCategory": {
      "title": "CatalogCategory",
      "type": "object",
      "description": "Represents a product category in the company's catalog.",
      "properties": {
        "name": { "type": "string" }
      },
      "required": ["name"]
    },
    "Product": {
      "title": "Product",
      "type": "object",
      "description": "Represents a specific product instance in the inventory.",
      "properties": {
        "name": { "type": "string" },
        "category": { "type": "string" },
        "stock": { "type": "number" },
        "reservedStock": { "type": "number" },
        "price": { "type": "number" },
        "lowStockThreshold": { "type": "number" },
        "criticalStockThreshold": { "type": "number" },
        "lastUpdated": { "type": "string", "format": "date" },
        "location": { "type": "string" },
        "unit": { "type": "string" }
      },
      "required": ["name", "category", "stock", "price", "lastUpdated"]
    },
    "Sale": {
      "title": "Sale",
      "type": "object",
      "description": "Represents a sale transaction.",
      "properties": {
        "date": { "type": "string", "format": "date-time" },
        "productId": { "type": "string" },
        "productName": { "type": "string" },
        "quantity": { "type": "number" },
        "unitPrice": { "type": "number" },
        "totalValue": { "type": "number" },
        "soldBy": { "type": "string" },
        "guideNumber": { "type": "string" },
        "location": { "type": "string" },
        "status": { "type": "string", "enum": ["Pago", "Levantado"] }
      },
      "required": ["date", "productId", "productName", "quantity", "totalValue", "soldBy", "guideNumber", "status"]
    },
    "Production": {
      "title": "Production",
      "type": "object",
      "description": "Represents a production record.",
      "properties": {
        "date": { "type": "string", "format": "date" },
        "productName": { "type": "string" },
        "quantity": { "type": "number" },
        "registeredBy": { "type": "string" },
        "location": { "type": "string" },
        "status": { "type": "string", "enum": ["Concluído", "Transferido"] }
      },
      "required": ["date", "productName", "quantity", "registeredBy", "status"]
    },
    "Order": {
      "title": "Order",
      "type": "object",
      "description": "Represents a production order.",
      "properties": {
        "productName": { "type": "string" },
        "quantity": { "type": "number" },
        "unit": { "type": "string" },
        "clientName": { "type": "string" },
        "deliveryDate": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Pendente", "Em produção", "Concluída"] },
        "productionStartDate": { "type": "string", "format": "date-time" },
        "quantityProduced": { "type": "number" },
        "productionLogs": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "date": { "type": "string", "format": "date-time" },
              "quantity": { "type": "number" },
              "notes": { "type": "string" },
              "registeredBy": { "type": "string" }
            }
          }
        }
      },
      "required": ["productName", "quantity", "unit", "deliveryDate", "status", "quantityProduced"]
    },
    "StockAdjustment": {
      "title": "Stock Adjustment",
      "type": "object",
      "description": "Represents a manual adjustment to inventory stock, creating an audit trail.",
      "properties": {
        "date": { "type": "string", "format": "date-time" },
        "productId": { "type": "string" },
        "productName": { "type": "string" },
        "locationId": { "type": "string" },
        "quantityChanged": { "type": "number", "description": "The change in quantity. Can be positive or negative." },
        "previousStock": { "type": "number" },
        "newStock": { "type": "number" },
        "reason": { "type": "string", "enum": ["Auditoria", "Quebra", "Devolução", "Correção"] },
        "notes": { "type": "string" },
        "adjustedBy": { "type": "string" }
      },
      "required": ["date", "productId", "productName", "locationId", "quantityChanged", "previousStock", "newStock", "reason", "adjustedBy"]
    },
    "StockTransfer": {
      "title": "Stock Transfer",
      "type": "object",
      "description": "Represents the movement of stock between two locations.",
      "properties": {
        "productId": { "type": "string" },
        "productName": { "type": "string" },
        "fromLocationId": { "type": "string" },
        "toLocationId": { "type": "string" },
        "quantity": { "type": "number" },
        "initiatedBy": { "type": "string" },
        "initiatedDate": { "type": "string", "format": "date-time" },
        "completedBy": { "type": "string" },
        "completedDate": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["Em Trânsito", "Concluída", "Cancelada"] }
      },
      "required": ["productId", "productName", "fromLocationId", "toLocationId", "quantity", "initiatedBy", "initiatedDate", "status"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "structure": [
       {
        "path": "/users/{userId}",
        "definition": {
          "schema": { "$ref": "#/entities/User" },
          "description": "Stores a mapping from user ID to company ID for fast lookups."
        }
      },
      {
        "path": "/companies/{companyId}",
        "definition": {
          "schema": { "$ref": "#/entities/Company" },
          "description": "Stores company information."
        }
      },
      {
        "path": "/companies/{companyId}/employees/{employeeId}",
        "definition": {
          "schema": { "$ref": "#/entities/Employee" },
          "description": "Stores internal employee user accounts for a company."
        }
      },
       {
        "path": "/companies/{companyId}/catalogProducts/{productId}",
        "definition": {
          "schema": { "$ref": "#/entities/CatalogProduct" },
          "description": "Stores the base product catalog for a company."
        }
      },
      {
        "path": "/companies/{companyId}/catalogCategories/{categoryId}",
        "definition": {
          "schema": { "$ref": "#/entities/CatalogCategory" },
          "description": "Stores the product categories for a company."
        }
      },
      {
        "path": "/companies/{companyId}/products/{productId}",
        "definition": {
          "schema": { "$ref": "#/entities/Product" },
          "description": "Stores inventory items for a company."
        }
      },
      {
        "path": "/companies/{companyId}/sales/{saleId}",
        "definition": {
          "schema": { "$ref": "#/entities/Sale" },
          "description": "Stores sales records for a company."
        }
      },
      {
        "path": "/companies/{companyId}/productions/{productionId}",
        "definition": {
          "schema": { "$ref": "#/entities/Production" },
          "description": "Stores production records for a company."
        }
      },
      {
        "path": "/companies/{companyId}/orders/{orderId}",
        "definition": {
          "schema": { "$ref": "#/entities/Order" },
          "description": "Stores production orders for a company."
        }
      },
      {
        "path": "/companies/{companyId}/stockAdjustments/{adjustmentId}",
        "definition": {
          "schema": { "$ref": "#/entities/StockAdjustment" },
          "description": "Stores a log of all manual stock adjustments for audit purposes."
        }
      },
      {
        "path": "/companies/{companyId}/stockTransfers/{transferId}",
        "definition": {
          "schema": { "$ref": "#/entities/StockTransfer" },
          "description": "Stores records of stock movements between locations."
        }
      }
    ]
  }
}
